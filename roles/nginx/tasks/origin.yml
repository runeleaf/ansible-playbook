# file: roles/nginx/tasks/main.yml
- name: nginx install
  yum: name=nginx state=installed

- name: copy nginx.conf
  template: src=roles/nginx/templates/nginx.conf.j2 dest=/etc/nginx/nginx.conf

- name: copy vhost.conf
  template: src=roles/nginx/templates/vhost.conf.j2 dest=/etc/nginx/conf.d/vhost.conf

- name: passenger setup
  command: /usr/local/bin/passenger-install-nginx-module --auto

- name: nginx is running and enabled
  service: name=nginx state=running enabled=yes
